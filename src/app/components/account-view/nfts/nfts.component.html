<div class="main-container" *ngIf="displayTokenCard()">
  <div class="flex-row top-container-nfts">
    <h1>NFT / Collectibles</h1>
    <div class="flex-row right">
      <ng-container
        *ngIf="this.tokenBalancesService.nfts && Object.keys(this.tokenBalancesService.nfts).length > 0">
        <span class="flex-row button icon-grey" [class.selected]="filter === 'ALL'" (click)="filter = 'ALL'">ALL</span>
        <span class="flex-row button icon-grey" [class.selected]="filter !== 'ALL'" (click)="filter = 'APP'">APP</span>
      </ng-container>
      <!-- <img class="button icon" src="../../../../assets/img/filter.svg" />
      <img class="button icon" src="../../../../assets/img/info.svg" /> -->
    </div>
  </div>
  <div class="flex-column nfts">
    <ng-container
      *ngIf="this.tokenBalancesService.nfts && Object.keys(this.tokenBalancesService.nfts).length > 0; else noTokens">
      <!-- loop through contracts -->
      <div [style.display]="filter !== 'ALL' ? '' : 'none'">
        <ng-container *ngFor="let key of Object.keys(this.tokenBalancesService.nfts)">
          <div class="flex-column collection" [class]="filter === key ? 'expanded' : ''" [id]="key">
            <div class="flex-row head" (click)="toggleDropdown('#' + key)">
              <div class="flex-row left">
                <img class="icon" [src]="this.tokenBalancesService.nfts[key]?.thumbnailUrl" />
                <div class="title">
                  {{ this.tokenBalancesService.nfts[key]?.name }}
                </div>
                <div class="count">{{ this.tokenBalancesService.nfts[key]?.tokens?.length }}</div>
              </div>
              <div class="flex-row right">
                <div class="flex-row button toggle"><img src="../../../../assets/img/caret-left.svg" /></div>
              </div>
            </div>
            <div class="flex-column scroll">
              <div class="flex-row body">
                <ng-container *ngFor="let token of this.tokenBalancesService.nfts[key]?.tokens; trackBy: trackToken">
                  <div class="flex-row token" (click)="viewToken(token)">
                    <div class="img-wrapper">
                      <img class="icon" [src]="token?.thumbnailUrl || token?.displayUrl" />
                      <div *ngIf="Number.parseInt(this.token?.balance) > 1" class="balance">{{
                        this.token?.balance }}</div>
                    </div>
                    <div class="flex-column right">
                      <div class="title">
                        {{token?.name}}
                      </div>
                      <div *ngIf="token?.series" class="issue">
                        {{ '#'+token?.series }}
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="flex-column collection scroll" [style.display]="filter === 'ALL' ? '' : 'none'">
        <div class="flex-row body">
          <ng-container *ngFor="let key of Object.keys(this.tokenBalancesService.nfts)">
            <ng-container
              *ngFor="let token of this.tokenBalancesService.nfts[key]?.tokens; let i = index; trackBy: trackToken">
              <div class="flex-row token" (click)="viewToken(token)">
                <div class="img-wrapper">
                  <img class="icon" [src]="token?.thumbnailUrl || token?.displayUrl" />
                  <div *ngIf="Number.parseInt(this.token?.balance) > 1" class="balance">{{
                    this.token?.balance }}</div>
                </div>
                <div class="flex-column right">
                  <div class="title">
                    {{token?.name}}
                  </div>
                  <div *ngIf="token?.series" class="issue">
                    {{ '#'+token?.series }}
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </ng-container>
    <ng-template #noTokens>
      <ng-container *ngIf="this.tokenBalancesService.nfts !== null">
        <ng-container *ngFor="let key of Object.keys(contractAliases); let i = index">
          <ng-container *ngIf="contractAliases[key]?.shouldDisplayLink">
            <div class="flex-column collection" [class]="filter === key ? 'expanded' : ''" [id]="key">
              <div class="flex-row head">
                <div class="flex-row left">
                  <img class="icon" [src]="contractAliases[key]?.thumbnailUrl" />
                  <div class="title">{{ contractAliases[key]?.name || key }}</div>
                  <div class="count">{{ '0' }}</div>
                </div>
                <div class="flex-row right">
                  <a [href]="contractAliases[key]?.link || '/'" target="_blank" class="link-to-app">
                    <button class="flex-row button">GO TO APP</button>
                  </a>
                </div>
              </div>
              <div class="flex-column scroll">
                <div class="flex-row body">
                </div>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-template>
  </div>
</div>