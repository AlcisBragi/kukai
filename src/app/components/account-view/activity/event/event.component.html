<ng-container [ngSwitch]="getType(activity)">
  <ng-template #CounterpartyRef let-myactivity>
    <span class="grey truncate-overflow">
      <ng-container *ngIf="myactivity.name; else elseBlock">
        <ng-container [ngSwitch]="myactivity.lookupType">
          <img *ngSwitchCase="2" height="12" src="../../../assets/img/google-logo.svg">
          <img *ngSwitchCase="3" height="12" src="../../../assets/img/reddit-logo.svg">
          <img *ngSwitchCase="4" height="12" src="../../../assets/img/twitter-logo.svg">
        </ng-container>
        &nbsp;{{ myactivity.name }}
      </ng-container>
      <ng-template #elseBlock>{{ myactivity.address }}</ng-template>
    </span>
  </ng-template>
  <div *ngSwitchCase="'sent'" class="sent"
    [class]="activity.status === 0 ? 'unconfirmed' : fresh ? 'new' : 'confirmed'"
    [class.failed]="activity.status === -1">
    <div class="flex-column">
      <div class="flex-row title">
        <ng-container *ngIf="!activity.entrypoint; else callEntrypoint">
          {{ '- ' + printAmount(activity) }}</ng-container>
        <ng-template #callEntrypoint>{{ sentKind(activity) }}</ng-template>
        <span class="failed" *ngIf="activity.status === -1">Error</span>
      </div>
      <div class="flex-row"><span class="flex-row address">Sent to:&nbsp;<img
            *ngIf="!!getCounterparty(activity)?.lookupType"
            [src]="getEventIcon()" />{{
          getCounterparty(activity)?.name || getCounterparty(activity)?.address || 'Burn'
          }}<img class="copy" src="../../../../assets/img/copy-icon.svg"
            (click)="copy(getCounterparty(activity)?.address)" /></span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
    </div>
  </div>
  <div *ngSwitchCase="'received'" class="received"
    [class]="activity.status === 0 ? 'unconfirmed' : fresh ? 'new' : 'confirmed'"
    [class.failed]="activity.status === -1">
    <div class="flex-column">
      <div class="flex-row title">
        <ng-container *ngIf="activity?.amount !== '0'">
          {{'+ ' + printAmount(activity) }}</ng-container>
        <span class="failed" *ngIf="activity.status === -1">Error</span>
      </div>
      <div class="flex-row"><span class="flex-row address">{{ receivedKind(activity) }} from:&nbsp;<img
            *ngIf="!!getCounterparty(activity)?.lookupType"
            [src]="getEventIcon()" />{{
          getCounterparty(activity)?.name || getCounterparty(activity)?.address || ''
          }}<img class="copy" src="../../../../assets/img/copy-icon.svg"
            (click)="copy(getCounterparty(activity)?.address)" /></span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
    </div>
  </div>
  <div *ngSwitchCase="'delegated'" class="delegated"
    [class]="activity.status === 0 ? 'unconfirmed' : fresh ? 'new' : 'confirmed'"
    [class.failed]="activity.status === -1">
    <div class="flex-column">
      <div class="flex-row title">
        Staked
        <span class="failed" *ngIf="activity.status === -1">Error</span>
      </div>
      <div class="flex-row"><span class="flex-row address">to:&nbsp;<img
            *ngIf="!!getCounterparty(activity)?.lookupType"
            [src]="getEventIcon()" />{{
          getCounterparty(activity)?.name ||
          getCounterparty(activity)?.address || ''
          }}<img class="copy" src="../../../../assets/img/copy-icon.svg"
            (click)="copy(getCounterparty(activity)?.address)" /></span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
    </div>
  </div>
  <div *ngSwitchCase="'undelegated'" class="delegated"
    [class]="activity.status === 0 ? 'unconfirmed' : fresh ? 'new' : 'confirmed'"
    [class.failed]="activity.status === -1">
    <div class="flex-column">
      <div class="flex-row title">
        Unstaked
        <span class="failed" *ngIf="activity.status === -1">Error</span>
      </div>
      <div class="flex-row"><span class="flex-row address">to:&nbsp;<img
            *ngIf="!!getCounterparty(activity)?.lookupType"
            [src]="getEventIcon()" />{{
          getCounterparty(activity)?.name ||
          getCounterparty(activity)?.address || '(none)'
          }}<img class="copy" src="../../../../assets/img/copy-icon.svg"
            (click)="copy(getCounterparty(activity)?.address)" /></span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
    </div>
  </div>
  <div *ngSwitchCase="'origination'" class="origination"
    [class]="activity.status === 0 ? 'unconfirmed' : fresh ? 'new' : 'confirmed'"
    [class.failed]="activity.status === -1">
    <div class="flex-column">
      <div class="flex-row title">
        <ng-container *ngIf="activity?.amount !== '0'">
          <ng-container *ngIf="activity?.destination?.address !== this.account.address">- </ng-container>{{
          printAmount(activity) }}
        </ng-container>
        <span class="failed" *ngIf="activity.status === -1">Error</span>
      </div>
      <div class="flex-row"><span class="flex-row address">Originated contract:&nbsp;<img
            *ngIf="!!getCounterparty(activity)?.lookupType"
            [src]="getEventIcon()" />{{
          getCounterparty(activity)?.name || getCounterparty(activity)?.address }}<img class="copy"
            src="../../../../assets/img/copy-icon.svg" (click)="copy(getCounterparty(activity)?.address)" /></span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
    </div>
  </div>
  <div *ngSwitchDefault>
    <div style="padding-left: 0.75rem">
      <div class="line"><span class="black">{{ getType(activity) | titlecase }}</span>
        <span *ngIf="activity.status !== 0" class="time">
          <a href="{{ explorerURL(activity.hash) }}" target="_blank">
            {{ activity.timestamp | timeAgo:trigger }}
          </a>
        </span>
        <ng-container *ngIf="activity.status === 0">Unconfirmed</ng-container>
      </div>
      <div class="line"><span class="grey">Counterparty â€”</span>
        <ng-template [ngTemplateOutlet]="CounterpartyRef"
          [ngTemplateOutletContext]="{ $implicit: getCounterparty(activity) }"></ng-template>
      </div>
    </div>
  </div>
</ng-container>